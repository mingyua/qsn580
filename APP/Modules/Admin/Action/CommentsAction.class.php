<?php/**后台首页控制器*/Class CommentsAction extends CommonAction{	Public function index(){		import('Class.Page',APP_PATH);		$count=M('comments')->count();		$page=new Page($count,10);		$order="order by id DESC";		$limit=$page->firstRow.','.$page->listRows;		$Model = new Model("comments");		$sql = 'select a.title,c.id,c.content,c.status,c.addtime  from think_comments as c, think_article as a where a.id=c.pid  limit '.$limit;		$comments = $Model->query($sql);		$this->comments=$comments;		//p($this->comments);die;		$this->page=$page->show();				$this->display();		}		Public function status(){		$id=$_POST['id'];		$comments = M("comments"); // 实例化User对象		$zt=$comments->where("id='$id'")->find();		if($zt['status']==1){		$data['status'] =0;		}else{		$data['status'] =1;		}		$comments->where("id='$id'")->save($data);		if($comments){			echo 1;		}else{			echo 0;		}	}	Public function del(){		$cid = intval($_GET['id']);		$comments = M("comments"); // 实例化User对象		if($comments->where("id=$cid")->delete()){					echo 1;				}else{					echo 0;				}				}	Public function delall(){				$cid =$_POST['id'];		$name=$this->getActionName();//获取模型名称		$model=D($name);//获取当前模块的操作对象		if(!empty($model)){			$pk=$model->getpk();//获取传递参数（以ID删除）			$id=$_REQUEST['delall'];			if(!empty($cid)){				$condition=array($pk=>array('IN',$cid));								if(false!==$model->where($condition)->delete()){					echo 1;				}else{					echo 0;				}			}					}					}}?>