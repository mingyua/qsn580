<?php	class CommonAction extends Action {        //这是thinkphp中自带的一个始使化方法，加载类的时候会首先调有和这个方法		public function _initialize(){		 header("Content-Type:text/html; charset=utf-8");		 if(!isset($_SESSION[C('USER_AUTH_KEY')]) || !isset($_SESSION['username'])){				$this->redirect(GROUP_NAME.'/Login/index');				}        // 用户权限检查		$notAuth=in_array(MODULE_NAME, explode(',', C('NOT_AUTH_MODULE'))) || in_array(ACTION_NAME, explode(',', C('NOT_AUTH_ACTION')));	    if (C('USER_AUTH_ON') && !$notAuth) {            import('ORG.Util.RBAC');			 if (!RBAC::AccessDecision(GROUP_NAME)) { //独立分组时必须加上GROUP_NAME----!RBAC::AccessDecision(GROUP_NAME)，如果不是独立分组直接写!RBAC::AccessDecision()即可。				// echo MODULE_NAME."-".ACTION_NAME. "没有权限！";				$this->redirect(GROUP_NAME.'/index/error'); 			 }		}		 $mname=MODULE_NAME;		 $aname=ACTION_NAME;		 $node=M("node")->field("id,name,title,pid")->where("name='$mname'")->find();		 $pid=$node['id'];		 $nodepid=M("node")->field("id,name,title,pid")->where("pid='$pid' and name='$aname'")->find();		 $this->nav='<nav class="breadcrumb"><i class="Hui-iconfont Hui-iconfont-home"></i> 首页 <span class="c-gray en">&gt;</span> '.$node['title'].' <span class="c-gray en">&gt;</span> '.$nodepid['title'].' <a class="btn btn-success radius r mr-20" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont Hui-iconfont-huanyipi"></i></a></nav>';		$this->title=$nodepid['title'];		$this->site=M('config')->find();		}			};		?>