<include file="APP/Modules/Admin/TPL/_header.html"/>
<script type="text/javascript">
		window.UEDITOR_HOME_URL='__ROOT__/Ueditor/';
		window.onload=function(){
			UE.getEditor('content');
			}
</script>
<script src="__ROOT__/Ueditor/ueditor.config.js"></script>
<script src="__ROOT__/Ueditor/ueditor.all.min.js"></script>
<script src="__PUBLIC__/js/common.js"></script>
<link rel="stylesheet" href="__PUBLIC__/lib/zyupload/control/css/zyUpload.css" type="text/css">
<script type="text/javascript" src="__PUBLIC__/lib/zyupload/core/zyFile.js"></script>
<script type="text/javascript" src="__PUBLIC__/lib/zyupload/control/js/zyUpload.js"></script>

<title>{title}</title>
</head>
<body>
<div class="admin">
{$nav}
<div id="tab-system" class="HuiTab  pd-10">
	<div class="tabBar cl"><span>{:C('pinfo')}</span><span class="">{:C('pupimg')}</span></div>
		<div class="tabCon">
		<form action="{:U(GROUP_NAME.'/Product/edit')}" method="post" enctype="multipart/form-data" class="form form-horizontal" id="form-article-add">
		<div class="row cl">
			<label class="form-label col-2"><span class="c-red">*</span>{:C('ptitle')}</label>
			<div class="formControls col-10">
				<input type="text" class="input-text" value="{$plist.title}" placeholder="" id="title" name="title">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-2"><span class="c-red">*</span>{:C('ppp')}</label>
			<div class="formControls col-2"> <span class="select-box">
				<select name="pinpai" class="select">
				<option value="{$plist.pinpan}">{$plist.pname}</option>
			   <foreach name="pingpai" item="v">
				<option value="{$v.id}">{$v.html}{$v.name}</option>
				</foreach>
				</select>
				</span> 
			</div>
			<label class="form-label col-2">{:C('ppost')}</label>
			<div class="formControls col-2"> 
				<input type="text" name="ppost" id="ppost" placeholder="0元" value="{$plist.ppost}" class="input-text" style="width:90%">元
			</div>
			<label class="form-label col-2">{:C('pcounts')}</label>
			<div class="formControls col-2"> 
				<input type="text" name="pcounts" id="pcounts" placeholder="100件" value="{$plist.pcounts}" class="input-text" style="width:90%">件
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-2"><span class="c-red">*</span>{:C('pkinds')}</label>
			<div class="formControls col-2"> <span class="select-box">
				<select name="kinds" class="select">
				<option value="{$plist.kinds}">{$plist.cate}</option>
			   <foreach name="cate" item="v">
				<option value="{$v.id}">{$v.html}{$v.name}</option>
				</foreach>
				</select>
				</span> 
			</div>
			<label class="form-label col-2">{:C('pprice')}</label>
			<div class="formControls col-2">
				<input type="text" name="price" id="price" placeholder="" value="{$plist.saleprice}" class="input-text" style="width:90%">
				元</div>
			<label class="form-label col-2">{:C('saleprice')}</label>
			<div class="formControls col-2">
				<input type="text" name="saleprice" id="saleprice" placeholder="" value="{$plist.saleprice}" class="input-text" style="width:90%">
				元</div>
		</div>
		<div class="row cl">
			<label class="form-label col-2">{:C('pkeys')}</label>
			<div class="formControls col-10">
				<input type="text" name="keys" id="keys" placeholder="多个关键字用英文逗号隔开，限10个关键字" value="{$plist.keys}" class="input-text">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-2">{:C('pdesc')}</label>
			<div class="formControls col-4">
				<textarea name="description"  class="textarea"   nullmsg="备注不能为空！" >{$plist.description}</textarea>
			</div>
			<label class="form-label col-2">{:C('pimg')}</label>
			<div class="formControls col-4">
				<div class="uploader-thum-container">
					<span class="btn-upload" style="float:left">
					  <a style="z-index:2;" href="javascript:void();" class="btn-uploadpic">浏览</a>
					  <input type="file" name="file"  id="imgong" onchange="preImg(this.id,'img1');" value="{$plist.image}" class="input-file">
					  </span><span class="ml-10" style="float:left;" ><img id="img1" src="{$site.site_url}{$plist.image}" style="display: block;" /></span>
				</div>
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-2">{:C('pstarttime')}</label>
			<div class="formControls col-4">
				<input type="text" class="date-y input-text" style="width:180px;" name="starttime" placeholder="请选择日期" value="{$plist.starttime|date='Y-m-d H:i:s',###}">
			</div>
			<label class="form-label col-2">{:C('pendtime')}</label>
			<div class="formControls col-4">
				<input type="text" class="date input-text" style="width:180px;" name="endtime" placeholder="请选择日期" value="{$plist.endtime|date='Y-m-d H:i:s',###}">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-2">{:C('pcontents')}</label>
			<div class="formControls col-10"> 
				<textarea id="content" name="contents"  style="width:100%;height:400px;">{$plist.contents}</textarea> 
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-2">{:C('pstatus')}</label>
			<div class="formControls col-10"> 
				<input name="status" type="radio" value="1" <if condition="$plist['status'] eq 1" >  checked="checked" </if>  />{:C('yes')}&nbsp;&nbsp;&nbsp;&nbsp;
				<input name="status" type="radio" value="0" <if condition="$plist['status'] eq 0" > checked="checked" </if> />{:C('no')}</cite>
			</div>
		</div>
		<div class="row cl">
			<input type="hidden" name="pid" value="{$plist.id}">
			<input type="hidden" name="img" value="{$plist.image}">
			<div class="col-10 col-offset-2">
				<button onClick="article_save_submit();" class="btn btn-primary radius" type="submit"><i class="Hui-iconfont">&#xe632;</i> 保存并提交审核</button>
				
				<button onClick="layer_close();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
			</div>
		</div>
				
		</form>
		</div>
		<div class="tabCon">
		<div class="row cl">
			<div class="col-6">
				<div id="demo" class="pl-10 f-l"></div> 
			</div>
			<div class="col-6">
				<div class=" bd cl">
				<foreach name='imglist' item='v'>
				<span class="mt-5 mb-5 ml-5 f-l bd">
				<img src="__ROOT__/{$v.image}" width="100">
				<p><a  onClick="img_del(this,'{$v.id}','{:U(GROUP_NAME.'/Product/delimg',array(id=>$v['id']))}')" href="javascript:;" >删除</a></p>
				</span>
				</foreach>
				</div>
		</div>
		</div>
		</div>
</div>


</div>
</div>
<include file="APP/Modules/Admin/TPL/_footer.html"/>
<script type="text/javascript">
$(function(){
	$("#pinyin_btn").click(function(){
		var str = $("#title").val();
		strtopy(str);
	});
});
function strtopy(str_zh){
	$.post("{:U(GROUP_NAME.'/Product/changeen')}",{str:str_zh},function(data){
		$("#retitle").val(data);
	});
}

$("input[type=checkbox]").click(function () {
   try {
	   if ($(this).attr("checked")) {
		   $("#place").val($("#place").val() + $(this).parent().text() + ";");
	   } else {
		   $("#place").val($("#place").val().replace($(this).parent().text() + ';', ""));
	   }
   } catch (e) {
	   $("#place").val("");
   }
})

</script>

<script type="text/javascript">
$(function(){
	$('.skin-minimal input').iCheck({
		checkboxClass: 'icheckbox-blue',
		radioClass: 'iradio-blue',
		increaseArea: '20%'
	});
	$.Huitab("#tab-system .tabBar span","#tab-system .tabCon","current","click","0");
});

$(function(){
	// 初始化插件
	$("#demo").zyUpload({
		width            :   "600px",                 // 宽度
		height           :   "400px",                 // 宽度
		itemWidth        :   "120px",                 // 文件项的宽度
		itemHeight       :   "100px",                 // 文件项的高度
		//url              :   "/upload/UploadAction",  // 上传文件的路径
		url              :   "{:U(GROUP_NAME.'/Product/uploadImg',array(id=>$id))}",
		multiple         :   true,                    // 是否可以多个文件上传
		dragDrop         :   true,                    // 是否可以拖动上传文件
		del              :   true,                    // 是否可以删除文件
		finishDel        :   false,  				  // 是否在上传文件完成后删除预览
		/* 外部获得的回调接口 */
		onSelect: function(selectFiles, allFiles){    // 选择文件的回调方法  selectFile:当前选中的文件  allFiles:还没上传的全部文件
			console.info("当前选择了以下文件：");
			console.info(selectFiles);
		},
		onProgress: function(file, loaded, total){    // 正在上传的进度的回调方法
			console.info("当前正在上传此文件：");
			console.info(file.name);
			console.info("进度等信息如下：");
			console.info(loaded);
			console.info(total);
		},   
		onDelete: function(file, files){              // 删除一个文件的回调方法 file:当前删除的文件  files:删除之后的文件
			console.info("当前删除了此文件：");
			console.info(file.name);
		},
		onSuccess: function(file, response){          // 文件上传成功的回调方法
			console.info("此文件上传成功：");
			console.info(file.name);
		},
		onFailure: function(file, response){          // 文件上传失败的回调方法
			console.info("此文件上传失败：");
			console.info(file.name);
		},
		onComplete: function(response){           	  // 上传完成的回调方法
			console.info("文件上传完成");
			console.info(response);
		}
	});
	
});


</script>

</body>
</html>