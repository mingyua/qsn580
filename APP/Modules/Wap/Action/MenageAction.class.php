<?phpClass MenageAction extends CommonAction{	public function _initialize(){		}	Public function index(){		import('Class.Cate',APP_PATH);		$cate=M('cate')->where("module<>'single' and module<>'slide'")->order('sort ASC')->select();		$this->cate=Cate::unlimitedForlevel($cate,'&nbsp;&nbsp;┗━');				import('Class.Page',APP_PATH);		$key=$_GET['title'];		$cid=$_GET['cate'];			$m=D('ArticleRelation');		if($key){						$map="id like '%$key%' || title like '%$key%'";		}else{			$map['id']  = array('neq',0);		}		if($cid){			$map['kinds']  = array('eq',$cid);		}else{			$map['kinds']  = array('neq',0);		}						$p=getpage($m,$map,12);		$list=$m->field(true)->where($map)->relation(true)->order('id desc')->select();		if(!$list){			$this->tip='<div class="f-18 c-red">暂时没有数据！</div>';		}		$this->cid=$cid;
		$this->article=$list;		$this->page=$p->show();										$this->display();		}	public function hots(){		$id=I('get.id');		$hots=I('post.hots');			$data['id']=$id;			$data['hots']=$hots;				$table=M('article')->save($data);		if($table){			$back=array('msg'=>'成功','status'=>1);			}else{			$back=array('msg'=>'失败','status'=>2);		}				$this->ajaxReturn($back);	}	public function wap(){		$id=I('get.id');
		$wap=I('post.wap');			$data['id']=$id;			$data['wap']=$wap;				$table=M('article')->save($data);		if($table){			$back=array('msg'=>'成功','status'=>1);			}else{			$back=array('msg'=>'失败','status'=>2);		}				$this->ajaxReturn($back);	}}?>